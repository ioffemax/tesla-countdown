<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polymarket Live Buy Price v4.0</title>
    <style>
        body {
            background-color: #000000;
            color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            user-select: none;
        }

        #container { 
            text-align: center; 
            width: 100%;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Верхняя информация */
        .header-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

        #last-update {
            font-size: 0.9rem;
            color: #555;
            font-family: monospace;
        }

        /* Главная сумма (Выплата) */
        #payout-amount {
            font-size: 18vw; 
            font-weight: 800;
            line-height: 1.1; 
            color: #4ade80;
            text-shadow: 0 0 50px rgba(74, 222, 128, 0.2);
            margin: 0;
            letter-spacing: -3px;
        }

        /* Пояснение */
        .explanation {
            font-size: 1.5rem;
            color: #888;
            margin-bottom: 30px; 
            font-weight: 400;
        }

        /* Технические детали */
        .stats-box {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .stat-item {
            border: 1px solid #333;
            padding: 10px 20px;
            border-radius: 12px;
            background: #111;
            font-size: 1.1rem;
            color: #666;
            min-width: 120px;
        }

        .stat-value {
            display: block;
            font-size: 1.4rem;
            color: #fff;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Версия */
        .version {
            position: fixed;
            bottom: 15px;
            right: 15px;
            font-size: 0.8rem;
            color: #444; 
            font-family: monospace;
            background: #000;
            padding: 2px 6px;
            border-radius: 4px;
            border: 1px solid #222;
        }

        /* Ошибки */
        #status {
            font-size: 1rem;
            color: #ef4444;
            margin-top: 20px;
            display: none; 
            background: rgba(239, 68, 68, 0.1);
            padding: 10px;
            border-radius: 8px;
        }

        .loading { opacity: 0.5; animation: pulse 1.5s infinite ease-in-out; }
        @keyframes pulse { 0% { opacity: 0.3; } 50% { opacity: 0.7; } 100% { opacity: 0.3; } }
    </style>
</head>
<body>

    <div id="container">
        <div class="header-info">
            <div id="last-update">Подключение...</div>
        </div>
        
        <div id="payout-amount" class="loading">---</div>
        
        <div class="explanation">получу, если куплю "Yes" на $100 сейчас</div>

        <div class="stats-box">
            <div class="stat-item">
                <span class="stat-value" id="buy-price">--</span>
                <span class="stat-label">Цена покупки</span>
            </div>
            <div class="stat-item">
                <span class="stat-value" id="probability">--</span>
                <span class="stat-label">Шанс</span>
            </div>
        </div>
        
        <div id="status"></div>
    </div>

    <div class="version">v4.0 (Live Orderbook)</div>

    <script>
        // --- КОНФИГУРАЦИЯ ---
        const SLUG = "russia-x-ukraine-ceasefire-in-2025";
        const MY_BET = 100; 
        
        // Используем прокси
        const PROXY = "https://corsproxy.io/?";
        const API_BASE = "https://gamma-api.polymarket.com";

        async function updateData() {
            const amountEl = document.getElementById('payout-amount');
            const probEl = document.getElementById('probability');
            const priceEl = document.getElementById('buy-price');
            const timeEl = document.getElementById('last-update');
            const statusEl = document.getElementById
