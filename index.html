<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ Tesla –æ—Å—Ç–∞–ª–æ—Å—å...</title>
    <style>
        :root {
            --pri: #ff00ff;     /* –æ—Å–Ω–æ–≤–Ω–æ–π –Ω–µ–æ–Ω */
            --sec: #00ff00;     /* –≤—Ç–æ—Ä–æ–π —Ü–≤–µ—Ç */
            --acc: #00ffff;     /* –∞–∫—Ü–µ–Ω—Ç */
            --bg1: #0a001a;
            --bg2: #1a0033;
            --emoji: üåü;
            --glow: #ff00ff;
        }
        body { margin:0; font-family:'Orbitron',sans-serif; background:linear-gradient(135deg,var(--bg1),var(--bg2)); color:#fff; min-height:100vh; overflow-x:hidden; }
        .container { max-width:600px; margin:20px auto; padding:20px; border:3px dashed var(--pri); border-radius:20px; background:rgba(0,0,0,0.85); box-shadow:0 0 50px var(--pri),0 0 70px var(--sec); position:relative; z-index:2; }
        h1 { font-size:2.6em; text-align:center; text-shadow:0 0 20px var(--glow),0 0 40px var(--pri); animation:titlePulse 4s infinite; margin:10px 0 20px; line-height: 1.2; }
        
        .countdown { display:flex; justify-content:space-around; flex-wrap:wrap; gap: 10px; background:linear-gradient(45deg,#000,var(--bg2)); padding:15px; border-radius:15px; animation:countdownPulse 3s infinite; }
        .time-unit { text-align:center; padding:10px; flex: 1 1 80px; background:rgba(255,255,255,0.05); border-radius:12px; border:2px solid var(--acc); box-shadow:0 0 20px var(--pri); animation:unitGlow 2s infinite; }
        .time-value { font-size:2.2em; font-weight:bold; color:var(--pri); text-shadow:0 0 15px currentColor; display: block; }
        .time-label { font-size: 0.8em; text-transform: uppercase; letter-spacing: 1px; }
        .time-value.update { animation:valuePop 0.4s ease-out; }
        
        #total-hours-counter { font-size:1.6em; text-align:center; margin:20px 0; color:var(--sec); text-shadow:0 0 20px var(--sec),0 0 30px var(--pri); animation:totalHoursGlow 2.5s infinite; }
        #total-hours-counter.update { animation:totalHoursFlash 0.6s; }

        .progress-bar { height:30px; background:#111; border-radius:15px; overflow:hidden; border:2px dashed var(--acc); margin:20px 0; position: relative; }
        .progress-fill { height:100%; width:0%; background:linear-gradient(90deg,var(--pri),var(--sec)); transition:width 1s ease; box-shadow:0 0 20px var(--pri); }
        #percentage-text { font-size:1.5em; text-align:center; color:var(--acc); text-shadow:0 0 15px var(--acc); margin-top: 5px; }

        .calendar-section { margin-top:30px; padding:20px; background:linear-gradient(45deg,var(--bg1),var(--bg2)); border:3px dashed var(--pri); border-radius:20px; animation:cosmicGlow 3.5s infinite; }
        .calendar-title { font-size:1.6em; text-align:center; margin-bottom:15px; color:var(--pri); text-shadow:0 0 20px var(--pri); animation:neonBlink 2s infinite alternate; }
        .calendar-grid { display:grid; grid-template-columns:repeat(7, 1fr); gap:5px; }
        .calendar-day { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; border:2px solid var(--acc); border-radius:50%; background:rgba(0,255,0,0.15); position:relative; overflow:hidden; animation:fadeIn 0.6s forwards; font-weight: bold; }
        .calendar-day::after { content:var(--emoji); position: absolute; opacity: 0.3; font-size: 0.8em; bottom: 2px; right: 2px;}
        .calendar-day.past { background:rgba(255,0,0,0.3); animation:pastTwinkle 2s infinite; opacity: 0.6; }
        .calendar-day.past::after { content:"X"; color:#ff0066; font-size:1.5em; opacity: 1; animation:dissolve 1.8s infinite; top: 50%; left: 50%; transform: translate(-50%, -50%); bottom: auto; right: auto; }
        .calendar-day.current { background:linear-gradient(45deg,var(--pri),var(--sec),#fff); color:#000; animation:currentFlash 1.5s infinite; z-index: 10; transform: scale(1.1); box-shadow: 0 0 15px var(--pri); border-color: #fff; }
        .calendar-day.current::before { content:"Tesla"; position:absolute; top:-15px; font-size: 0.6em; background: #000; color: #fff; padding: 2px 4px; border-radius: 4px; animation:cometTrail 1.8s infinite; }
        .calendar-day:not(.past):not(.current) { animation:futureTwinkle 2s infinite; }
        .calendar-day.empty { visibility:hidden; border: none; background: none; }

        /* –¢–µ–º—ã (0-9) */
        .daily-0 {--pri:#ff00ff;--sec:#00ffff;--acc:#ff00ff;--bg1:#0a001a;--bg2:#1a0033;--emoji:üåü;--glow:#ff00ff;}
        .daily-1 {--pri:#00ff00;--sec:#ffff00;--acc:#00ff00;--bg1:#001a00;--bg2:#003300;--emoji:üöÄ;--glow:#00ff00;}
        .daily-2 {--pri:#00ffff;--sec:#0088ff;--acc:#00ffff;--bg1:#001a1a;--bg2:#003333;--emoji:üåô;--glow:#00ffff;}
        .daily-3 {--pri:#ff6600;--sec:#ffff00;--acc:#ff0066;--bg1:#1a0a00;--bg2:#331a00;--emoji:ü™ê;--glow:#ff6600;}
        .daily-4 {--pri:#ff0066;--sec:#ff00ff;--acc:#ffff00;--bg1:#1a000d;--bg2:#33001a;--emoji:ü¶ñ;--glow:#ff0066;}
        .daily-5 {--pri:#aa00ff;--sec:#00ffaa;--acc:#ffffff;--bg1:#0f001a;--bg2:#1a0033;--emoji:üëΩ;--glow:#aa00ff;}
        .daily-6 {--pri:#ffff00;--sec:#ff6600;--acc:#00ff00;--bg1:#1a1a00;--bg2:#333300;--emoji:‚ö°Ô∏è;--glow:#ffff00;}
        .daily-7 {--pri:#00ffaa;--sec:#0088ff;--acc:#ff00ff;--bg1:#001a0f;--bg2:#00331a;--emoji:üåå;--glow:#00ffaa;}
        .daily-8 {--pri:#ff3366;--sec:#66ff33;--acc:#33ffff;--bg1:#1a0005;--bg2:#001a05;--emoji:ü¶ï;--glow:#ff3366;}
        .daily-9 {--pri:#cc00ff;--sec:#00ccff;--acc:#ffff33;--bg1:#0f001a;--bg2:#1a0f33;--emoji:üå†;--glow:#cc00ff;}

        @keyframes titlePulse {0%,100%{transform:scale(1)}50%{transform:scale(1.02)}}
        @keyframes countdownPulse {0%,100%{box-shadow:0 0 30px var(--pri)}50%{box-shadow:0 0 60px var(--sec)}}
        @keyframes unitGlow {0%,100%{box-shadow:0 0 10px var(--pri)}50%{box-shadow:0 0 25px var(--sec)}}
        @keyframes valuePop {0%{transform:scale(1)}50%{transform:scale(1.3);opacity:0.7}100%{transform:scale(1)}}
        @keyframes totalHoursGlow {0%,100%{text-shadow:0 0 15px var(--sec)}50%{text-shadow:0 0 40px var(--pri)}}
        @keyframes totalHoursFlash {0%{filter:brightness(1)}50%{filter:brightness(2)}100%{filter:brightness(1)}}
        @keyframes cosmicGlow {0%,100%{box-shadow:0 0 30px var(--pri)}50%{box-shadow:0 0 70px var(--sec),0 0 90px var(--acc)}}
        @keyframes neonBlink {0%{text-shadow:0 0 20px var(--pri)}100%{text-shadow:0 0 40px var(--sec)}}
        @keyframes fadeIn {0%{opacity:0;transform:scale(0.3)}100%{opacity:1;transform:scale(1)}}
        @keyframes currentFlash {0%,100%{background:linear-gradient(45deg,var(--pri),var(--sec))}50%{filter:brightness(1.5)}}
        @keyframes cometTrail {0%,100%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-50%) translateY(-5px)}}
        @keyframes pastTwinkle {0%,100%{opacity:0.8}50%{opacity:1}}
        @keyframes dissolve {0%,100%{opacity:0.7;transform:scale(1)}50%{opacity:1;transform:scale(1.4)}}
        @keyframes futureTwinkle {0%,100%{opacity:0.7}50%{opacity:1;transform:scale(1.1)}}

        @media (max-width:600px){
            .calendar-grid{gap:3px;}
            .calendar-day{font-size:0.8em; padding: 2px;}
            h1{font-size:1.8em;}
            .time-value{font-size:1.8em;}
            .container { padding: 10px; width: 90%; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="version">v2.2 Stable Cosmic Edition</div>
    <h1 id="title">–î–æ —Ç–≤–æ–µ–≥–æ Tesla –æ—Å—Ç–∞–ª–æ—Å—å...</h1>

    <div class="countdown">
        <div class="time-unit"><div class="time-value" id="days">00</div><div class="time-label">–î–Ω–µ–π</div></div>
        <div class="time-unit"><div class="time-value" id="hours">00</div><div class="time-label">–ß–∞—Å–æ–≤</div></div>
        <div class="time-unit"><div class="time-value" id="minutes">00</div><div class="time-label">–ú–∏–Ω—É—Ç</div></div>
        <div class="time-unit"><div class="time-value" id="seconds">00</div><div class="time-label">–°–µ–∫—É–Ω–¥</div></div>
    </div>

    <p id="total-hours-counter">–û—Å—Ç–∞–ª–æ—Å—å —á–∞—Å–æ–≤: 0</p>
    <p style="text-align:center; opacity:0.8">–¶–µ–ª–µ–≤–∞—è –¥–∞—Ç–∞: 26 –Ω–æ—è–±—Ä—è 2025 9:00</p>

    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
    <div id="percentage-text">0%</div>

    <div class="calendar-section">
        <div class="calendar-title">–ö–∞–ª–µ–Ω–¥–∞—Ä—å –¥–æ –ö–æ—Å–º–æ-–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è!</div>
        <div class="calendar-grid" id="calendar-grid"></div>
    </div>
</div>

<script>
/* ==== –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–∞—Ç ==== */
// –¢–ï–ö–£–©–ê–Ø –¶–ï–õ–¨: 26 –Ω–æ—è–±—Ä—è. –ï—Å–ª–∏ –¥–∞—Ç–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –¥–µ–∫–∞–±—Ä—å), 
// –ø–æ–º–µ–Ω—è–π –¥–∞—Ç—É –Ω–∏–∂–µ –Ω–∞ '2025-12-15T09:00:00'
const targetDate = new Date("2025-11-26T09:00:00").getTime();
const startDate = new Date("2025-11-11T09:00:00").getTime();

/* ==== 1. –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ç–µ–º–∞ + –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ (Fix) ==== */
function applyDailyTheme() {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞–∑–Ω–∏—Ü—É –≤–æ –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ–±—ã —Ç–µ–º–∞ –Ω–µ –ª–æ–º–∞–ª–∞—Å—å –ø—Ä–∏ —Å–º–µ–Ω–µ –º–µ—Å—è—Ü–∞
    const now = new Date();
    const dayMs = 1000 * 60 * 60 * 24;
    const daysPassed = Math.floor((now.getTime() - startDate) / dayMs);
    
    // –ë–µ—Ä–µ–º –º–æ–¥—É–ª—å 10, —Ç–∞–∫ –∫–∞–∫ –≤ CSS –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ .daily-0 ... .daily-9
    // Math.max(0, ...) –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–æ –Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—Ç–∞
    const themeIndex = Math.max(0, daysPassed) % 10; 
    document.documentElement.className = `daily-${themeIndex}`;

    // –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –≤ –ø–æ–ª–Ω–æ—á—å (–ò–∑—Ä–∞–∏–ª—å UTC+2/UTC+3)
    // –ü—Ä–æ—Å—Ç–æ –±–µ—Ä–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã
    const midnight = new Date();
    midnight.setHours(24,0,0,0);
    const msToMidnight = midnight.getTime() - now.getTime();
    setTimeout(() => location.reload(true), msToMidnight + 1000);
}
applyDailyTheme();

/* ==== 2. –¢–∞–π–º–µ—Ä ==== */
const els = {
    days: document.getElementById('days'),
    hours: document.getElementById('hours'),
    minutes: document.getElementById('minutes'),
    seconds: document.getElementById('seconds'),
    totalH: document.getElementById('total-hours-counter'),
    progress: document.getElementById('progress-fill'),
    percent: document.getElementById('percentage-text'),
    title: document.getElementById('title')
};

const totalDuration = targetDate - startDate;
let last = {d:-1,h:-1,m:-1,s:-1,t:-1};

function update() {
    const now = Date.now();
    const dist = targetDate - now;
    
    if (dist < 0) {
        els.title.textContent = "Tesla —É–∂–µ —Ç–≤–æ—è! –ö–û–°–ú–û–° –ó–û–í–Å–¢!";
        ["days","hours","minutes","seconds"].forEach(k=>els[k].textContent="00");
        els.progress.style.width = "100%";
        els.percent.textContent = "100%";
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä —á—Ç–æ–±—ã –Ω–µ –≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
        return; 
    }

    const d = Math.floor(dist/(1000*60*60*24));
    const h = Math.floor((dist%(1000*60*60*24))/(1000*60*60));
    const m = Math.floor((dist%(1000*60*60))/(1000*60));
    const s = Math.floor((dist%(1000*60))/1000);
    const totalH = Math.floor(dist/(1000*60*60));

    if (d!==last.d) { els.days.textContent = d.toString().padStart(2,'0'); els.days.classList.add('update'); setTimeout(()=>els.days.classList.remove('update'),400); last.d=d; }
    if (h!==last.h) { els.hours.textContent = h.toString().padStart(2,'0'); els.hours.classList.add('update'); setTimeout(()=>els.hours.classList.remove('update'),400); last.h=h; }
    if (m!==last.m) { els.minutes.textContent = m.toString().padStart(2,'0'); els.minutes.classList.add('update'); setTimeout(()=>els.minutes.classList.remove('update'),400); last.m=m; }
    if (s!==last.s) { els.seconds.textContent = s.toString().padStart(2,'0'); els.seconds.classList.add('update'); setTimeout(()=>els.seconds.classList.remove('update'),400); last.s=s; }
    
    if (totalH!==last.t) { 
        els.totalH.textContent = `–û—Å—Ç–∞–ª–æ—Å—å —á–∞—Å–æ–≤: ${totalH}`; 
        els.totalH.classList.add('update'); 
        setTimeout(()=>els.totalH.classList.remove('update'),600); 
        last.t=totalH; 
    }

    const elapsed = now - startDate;
    // –ó–∞—â–∏—Ç–∞, —á—Ç–æ–±—ã –ø—Ä–æ–≥—Ä–µ—Å—Å –Ω–µ —É—à–µ–ª –≤ –º–∏–Ω—É—Å –∏–ª–∏ –±–æ–ª—å—à–µ 100
    const perc = Math.max(0, Math.min(100, (elapsed / totalDuration) * 100));
    els.progress.style.width = perc.toFixed(2)+"%";
    els.percent.textContent = perc.toFixed(1)+"%";
}
setInterval(update,1000);
update();

/* ==== 3. –ö–∞–ª–µ–Ω–¥–∞—Ä—å (–£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞) ==== */
function generateCalendar() {
    const grid = document.getElementById('calendar-grid');
    grid.innerHTML = ''; // –û—á–∏—Å—Ç–∫–∞

    const start = new Date(startDate);
    const end = new Date(targetDate);
    const today = new Date(); today.setHours(0,0,0,0);

    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –Ω–∞—á–∞–ª–∞ (0-6), —á—Ç–æ–±—ã —Å–¥–≤–∏–Ω—É—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å
    const startDayOfWeek = start.getDay(); 
    
    // –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –≤ –Ω–∞—á–∞–ª–æ
    for(let i=0; i<startDayOfWeek; i++) {
        grid.innerHTML += `<div class="calendar-day empty"></div>`;
    }

    // –¶–∏–∫–ª –ø–æ –¥–Ω—è–º –æ—Ç —Å—Ç–∞—Ä—Ç–∞ –¥–æ —Ñ–∏–Ω–∏—à–∞
    // –°–æ–∑–¥–∞–µ–º –∫–æ–ø–∏—é –¥–∞—Ç—ã –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–∏
    let currentIter = new Date(start);
    
    // –û–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å —Ü–∏–∫–ª–∞ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π (–º–∞–∫—Å 60 –¥–Ω–µ–π)
    let safety = 0;
    while (currentIter <= end && safety < 60) {
        // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∞—Ç –±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏
        const iterTime = new Date(currentIter).setHours(0,0,0,0);
        const todayTime = today.getTime();
        
        let className = '';
        if (iterTime < todayTime) className = 'past';
        else if (iterTime === todayTime) className = 'current';
        
        grid.innerHTML += `
            <div class="calendar-day ${className}">
                ${currentIter.getDate()}
            </div>`;
        
        // –°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
        currentIter.setDate(currentIter.getDate() + 1);
        safety++;
    }
}
generateCalendar();

</script>
</body>
</html>
