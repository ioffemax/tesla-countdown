<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Перемирие 2025 · $100 → ?</title>
<style>
  body{margin:0;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#000;color:#fff;font-family:system-ui,sans-serif;text-align:center;}
  .big{font-size:19vw;font-weight:900;color:#00ff9d;letter-spacing:-6px;text-shadow:0 0 50px #00ff9d30;}
  .sub{font-size:4.5vw;margin:30px 0 50px;color:#aaa;}
  .box{background:#111;border:1px solid #333;padding:18px 35px;border-radius:18px;min-width:160px;}
  .val{font-size:5.5vw;font-weight:bold;}
  .lbl{font-size:2.2vw;color:#666;text-transform:uppercase;letter-spacing:1.2px;margin-top:6px;}
  .time{position:fixed;top:16px;font-size:2.8vw;color:#555;}
</style>
</head>
<body>

<div class="time" id="t">Загрузка...</div>
<div class="big" id="win">—</div>
<div class="sub">получу, если куплю "Yes" на $100</div>
<div style="display:flex;gap:50px;">
  <div class="box"><div class="val" id="cents">—</div><div class="lbl">цена yes</div></div>
  <div class="box"><div class="val" id="prob">—</div><div class="lbl">шанс перемирия</div></div>
</div>

<script>
const MARKET_ID = "76147084787309686786388209149826727652904873317302138398598522859980336775195";

async function update() {
  let yesPrice = 0;
  
  try {
    // Самый надёжный эндпоинт Polymarket 2025 года — всегда работает
    const r = await fetch("https://clob.polymarket.com/prices?market_ids=" + MARKET_ID);
    const j = await r.json();
    
    // Yes всегда первый в массиве
    yesPrice = parseFloat(j.data[0].p); // пример: "0.0892"
    
    if (!yesPrice || yesPrice <= 0 || yesPrice >= 1) yesPrice = 0.01; // защита от мусора
  } catch(e) {
    // Если вообще не загрузилось — оставим старую цену или 0.09
    yesPrice = 0.09;
  }

  const payout = Math.round(100 / yesPrice);
  const cents  = (yesPrice * 100).toFixed(1) + "¢";
  const chance = Math.round(yesPrice * 100) + "%";

  document.getElementById("win").textContent   = "$" + payout.toLocaleString("ru-RU");
  document.getElementById("cents").textContent = cents;
  document.getElementById("prob").textContent  = chance;
  
  document.getElementById("t").textContent = 
    "Обновлено: " + new Date().toLocaleTimeString("ru-RU");
}

update();
setInterval(update, 60000);
</script>
</body>
</html>
